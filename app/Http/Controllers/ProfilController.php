<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Models\User;
use Illuminate\Support\Facades\DB;

class ProfilController extends Controller
{
   public function updateSolde(){

$soldes = [
'1' => 58.5 ,
'2' => 54 ,
'28' => -6 ,
'37' => 49.5 ,
'40' => 25 ,
'43' => 29.5 ,
'52' => 10 ,
'55' => 38.5 ,
'61' => 19 ,
'81' => 53.5 ,
'92' => 37.5 ,
'98' => 46.5 ,
'108' => 46 ,
'118' => 30 ,
'147' => 30 ,
'149' => 27.5 ,
'157' => 3.5 ,
'174' => 54.5 ,
'180' => 15 ,
'181' => 12 ,
'186' => 11.5 ,
'188' => 52.5 ,
'190' => 58.5 ,
'193' => 42.5 ,
'208' => 29 ,
'210' => 14.5 ,
'211' => 29 ,
'213' => 48.5 ,
'225' => 54.5 ,
'226' => 26 ,
'227' => 8.5 ,
'228' => 22.5 ,
'230' => 37 ,
'232' => 43.5 ,
'235' => 13 ,
'244' => 47 ,
'252' => 17 ,
'266' => 32.5 ,
'269' => -2.5 ,
'305' => 51 ,
'307' => 46 ,
'316' => 12 ,
'321' => 34.5 ,
'323' => 16.5 ,
'325' => 52 ,
'338' => 6 ,
'356' => 18.5 ,
'359' => 2 ,
'377' => 26.5 ,
'379' => 28 ,
'388' => 48 ,
'392' => 13.5 ,
'400' => 49 ,
'404' => 9.5 ,
'405' => 19 ,
'420' => 11.5 ,
'422' => -8.5 ,
'423' => 14.5 ,
'424' => 47 ,
'444' => 12 ,
'451' => 9 ,
'452' => 49 ,
'463' => 47.5 ,
'468' => 49 ,
'486' => 30 ,
'493' => 11 ,
'496' => 56 ,
'508' => 32.5 ,
'518' => 34.5 ,
'521' => 27.5 ,
'525' => 33.5 ,
'526' => 38.5 ,
'528' => 57 ,
'529' => 33.5 ,
'535' => 8.5 ,
'538' => 24.5 ,
'542' => 15 ,
'547' => 28 ,
'549' => 15 ,
'557' => 30.5 ,
'568' => 22.5 ,
'569' => 16 ,
'574' => 17.5 ,
'578' => 16 ,
'585' => 16.5 ,
'586' => 17 ,
'588' => 17 ,
'597' => 8 ,
'604' => 57 ,
'615' => 33 ,
'620' => 23.5 ,
'624' => 18 ,
'627' => 15.5 ,
'645' => 42 ,
'648' => 25 ,
'651' => 39.5 ,
'655' => 43 ,
'656' => 45 ,
'662' => 46.5 ,
'665' => 35 ,
'667' => 33.5 ,
'668' => 41.5 ,
'673' => -5.5 ,
'677' => 41.5 ,
'689' => 26 ,
'692' => 24 ,
'722' => -34 ,
'751' => -26 ,
'756' => 24.5 ,
'757' => 2.5 ,
'759' => 15.5 ,
'763' => 24 ,
'767' => 23.5 ,
'771' => -8 ,
'772' => 29 ,
'773' => 3 ,
'775' => 17 ,
'778' => 16.5 ,
'783' => 23.5 ,
'787' => 29.5 ,
'799' => 23 ,
'801' => 37.5 ,
'802' => 12.5 ,
'807' => 13 ,
'808' => 4 ,
'812' => 12.5 ,
'815' => 16 ,
'820' => 16.5 ,
'821' => -3 ,
'822' => 33.5 ,
'828' => 12.5 ,
'831' => 17.5 ,
'832' => 35 ,
'835' => 44 ,
'837' => 43 ,
'841' => 24.5 ,
'853' => 3.5 ,
'855' => 8 ,
'862' => 17.5 ,
'866' => 3.5 ,
'873' => -8.5 ,
'877' => 23 ,
'878' => 18 ,
'890' => -0.5 ,
'892' => 12.5 ,
'893' => 24 ,
'896' => 4 ,
'897' => 4.5 ,
'901' => 23.5 ,
'904' => 20 ,
'908' => 42 ,
'912' => 2.5 ,
'914' => 18 ,
'921' => 40.5 ,
'927' => 17 ,
'928' => 16 ,
'930' => 16.5 ,
'933' => 1.5 ,
'938' => 4.5 ,
'940' => 5 ,
'945' => 18 ,
'946' => -2 ,
'949' => 1 ,
'950' => 11 ,
'952' => 14.5 ,
'953' => 0 ,
'955' => -0.5 ,
'956' => 12 ,
'958' => 0.5 ,
'961' => 14.5 ,
'963' => 11.5 ,
'964' => 4.5 ,
'965' => 9.5 ,
'966' => 10.5 ,
'967' => 8 ,
'968' => 10 ,
'969' => 10 ,
'970' => 12.5 ,
'971' => 12.5 ,
'973' => 8.5 ,
'974' => 11 ,
'976' => 3 ,
'978' => -1.5 ,
'979' => 9.5 ,
'981' => -6 ,
'982' => 6.5 ,
'983' => 5 ,
'984' => 1 ,
'985' => 4 ,
'986' => 2 ,
'988' => 7 ,
'989' => 12 ,
'990' => 6.5 ,
'991' => 5.5 ,
'992' => 5.5 ,
'993' => 4 ,
'994' => 5 ,
'996' => -3 ,
'997' => 4 ,
'998' => 4 ,
'999' => 5 ,
'1000' => 4 ,
'1001' => 5 ,
'1002' => 3 ,
'1003' => 5 ,
'1004' => 2.5 ,
'1006' => 1.5 ,
'1007' => 1.5 ,
'1008' => -0.5 ,
'1009' => 4.5 ,
'1010' => -0.5 ,
'1011' => 2.5 ,
'1012' => 3.5 ,
'1013' => 2.5 ,
'1014' => 3.5 ,
'1015' => 3.5 ,
'1016' => -1.5 ,
'1017' => 2.5 ,
'1018' => 3.5 ,
'1019' => 0.5 ,
'1020' => 0.5 ,
'1021' => 3.5 ,
'1022' => 6 ,
'1024' => 4 ,
'1025' => 1 ,
'1026' => 2 ,
'1027' => 3 ,
'1028' => 0 ,
'1029' => 2 ,
'1030' => 2 ,
'1031' => 1 ,
'1032' => 1 ,
'1033' => 0 ,
'1034' => 2 ,
'1036' => -1.5 ,
'1037' => -1.5 ,
'1038' => 1 ,
'1039' => 0 ,
'1040' => 2 ,
'1041' => 2 ,
'1042' => -1 ,
'1043' => 2 ,
'1044' => 4.5 ,
'1045' => 4.5 ,
'1046' => 0.5 ,
'1047' => 3 ,
'1048' => 3 ,
'1049' => 3 ,
'1050' => 3 ,
'1051' => 1 ,
'1052' => 3 ,
'1053' => 1.5 ,
'1054' => 1.5 ,
'1055' => 1.5 ,
'1056' => 1.5 ,
'1058' => 1.5 ,
'1059' => 3 ,
'1060' => 1.5 ,
'1061' => 1.5 ,
'1062' => 1.5 ,
'1063' => 1.5 ,
'1064' => 1.5 ,
'1065' => 1.5 
];

      $cpt = 0;
      foreach ($soldes as $matricule => $solde) {
         // Retrieve the first user with the given matricule
         $user = User::where('matricule', $matricule)->first();

         if ($user) {
            // Update the solde_conge attribute
            $user->solde_conge = $solde;
            // Save the user
            $user->save();
            $cpt++;
         } else {
            // Handle the case where the user is not found (optional)
            // For example, log a warning or throw an exception
            \Log::warning("User with matricule {$matricule} not found.");
         }
            return ($cpt . " User been updated.");
      }

   }

}
